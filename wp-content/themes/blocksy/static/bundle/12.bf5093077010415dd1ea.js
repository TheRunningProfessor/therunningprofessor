(window.blocksyJsonP=window.blocksyJsonP||[]).push([[12],{31:function(e,t,r){"use strict";r.r(t),r.d(t,"mount",(function(){return d}));var i=r(1),o=r.n(i),s=r(0),a=r.n(s);function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const d=(e,{event:t})=>{const r={shareEl:!1,closeOnScroll:!1,history:!1,hideAnimationDuration:0,showAnimationDuration:0},i=(e,t=null)=>{var i=o()(".pswp")[0],s=o()(e);const a=[...e.closest(".woocommerce-product-gallery").querySelectorAll(".flexy-items .ct-image-container img:not(.zoomImg), .woocommerce-product-gallery > .ct-image-container img:not(.zoomImg)")].map(e=>({img:e,src:e.closest("a")?e.closest("a").href:e.src,w:(e.closest("a")?e.closest("a").dataset.width:e.width)||e.width,h:(e.closest("a")?e.closest("a").dataset.height:e.width)||e.width,title:e.getAttribute("title")}));if(1!==a.length||!a[0].img.closest("a")||a[0].img.closest("a").getAttribute("href")){var c=o.a.extend({index:0===t?0:t||o()(s).index(),addCaptionHTMLFn:function(e,t){return e.title?(t.children[0].textContent=e.title,!0):(t.children[0].textContent="",!1)}},r);new PhotoSwipe(i,PhotoSwipeUI_Default,a,c).init()}},s=({onlyZoom:e=!1}={})=>{let t=[...document.querySelectorAll(".woocommerce-product-gallery .woocommerce-product-gallery__trigger")];[...document.querySelectorAll(".single-product .flexy-items .ct-image-container, .single-product .woocommerce-product-gallery > .ct-image-container")].map(r=>{if((wp.customize&&wp.customize("has_product_single_lightbox")&&"yes"===wp.customize("has_product_single_lightbox")()||!wp.customize)&&!e&&(r.hasPhotoswipeListener||(r.hasPhotoswipeListener=!0,r.addEventListener("click",e=>{if(e.preventDefault(),t.length>0)return;let o=0;r.closest(".flexy-items")&&(o=[...r.closest(".flexy-items").children].indexOf(r.parentNode)),window.PhotoSwipe&&i(r,o)}))),o.a.fn.zoom&&(wp.customize&&wp.customize("has_product_single_zoom")&&"yes"===wp.customize("has_product_single_zoom")()||!wp.customize)){const e=r.getBoundingClientRect();o()(r).zoom(l(l({url:r.href,touch:!1,duration:50},e.width>parseFloat(r.dataset.width)||e.height>parseFloat(r.dataset.height)?{magnify:2}:{}),function(){try{return document.createEvent("TouchEvent"),!0}catch(e){return!1}}()?{on:"toggle"}:{})),setTimeout(()=>{})}}),t.map(e=>{e.hasPhotoswipeListener||(e.hasPhotoswipeListener=!0,e.addEventListener("click",t=>{if(t.preventDefault(),t.stopPropagation(),e.closest(".ct-image-container"))window.PhotoSwipe&&i(e.closest(".ct-image-container"));else if(document.querySelector(".single-product .woocommerce-product-gallery > .ct-image-container")&&window.PhotoSwipe&&i(document.querySelector(".single-product .woocommerce-product-gallery > .ct-image-container")),document.querySelector(".single-product .flexy-items .ct-image-container")){let e=document.querySelector(".single-product .flexy-pills"),t=Array.from(e.querySelector(".active").parentNode.children).indexOf(e.querySelector(".active")||e.firstElementChild);window.PhotoSwipe&&i(document.querySelector(".single-product .flexy-items").children[t].firstElementChild,t)}}))})};if(s(),!o.a||!o.a.fn||!o.a.fn.wc_variations_image_update)return;const c=o.a.fn.wc_variations_image_update,n=({context:e,variation:t,args:r})=>{if(e[0].closest(".single-product").querySelector(".woocommerce-product-gallery > .ct-image-container")){let i=e[0].closest(".single-product").querySelector(".woocommerce-product-gallery > .ct-image-container");if(i.querySelector(".zoomImg")&&i.querySelector(".zoomImg").remove(),t){if(t.image&&t.image.src&&t.image.src.length>0){let e=i.querySelector("img");i.querySelector("img")||(e=document.createElement("img"),e.classList.add("ct-variation-image")),e.classList.contains("ct-variation-image")||e.dataset.originalSrc||(i.dataset.originalHref=i.href,e.src&&(e.dataset.originalSrc=e.src),e.srcset&&(e.dataset.originalSrcSet=e.srcset),e.sizes&&(e.dataset.originalSizes=e.sizes)),i.href=t.image.full_src,t.image.srcset&&(e.srcset=t.image.srcset),t.image.sizes&&(e.sizes=t.image.sizes),e.src=t.image.src,i.appendChild(e)}}else{let e=i.querySelector("img");e&&i.querySelector(".ct-variation-image")?e.remove():(i.href=i.dataset.originalHref||i.href,(e.dataset.originalSrc||e.src)&&(e.src=e.dataset.originalSrc||e.src),(e.dataset.originalSrcSet||e.srcset)&&(e.srcset=e.dataset.originalSrcSet||e.srcset),(e.dataset.originalSizes||e.sizes)&&(e.sizes=e.dataset.originalSizes||e.sizes))}return s({onlyZoom:!0}),void(c&&c.apply(e,r))}if(!e[0].closest(".single-product").querySelector(".flexy-pills"))return void(c&&c.apply(e,r));const i=()=>{e[0].closest(".single-product").querySelector(".flexy-container").dataset.flexy||e[0].closest(".single-product").querySelector(".flexy-pills > *").firstElementChild.click()},o=()=>{let t=e[0].closest(".single-product").querySelector(".flexy-pills [data-original-src]"),r=e[0].closest(".single-product").querySelector(".flexy-items [data-original-src]");t&&(t.parentNode.href=t.parentNode.dataset.originalHref||t.parentNode.href,(t.dataset.originalSrc||t.src)&&(t.src=t.dataset.originalSrc||t.src),(t.dataset.originalSrcSet||t.srcset)&&(t.srcset=t.dataset.originalSrcSet||t.srcset),(t.dataset.originalSizes||t.sizes)&&(t.sizes=t.dataset.originalSizes||t.sizes),r.parentNode.href=r.parentNode.dataset.originalHref||r.parentNode.href,(r.dataset.originalSrc||r.src)&&(r.src=r.dataset.originalSrc||r.src),(r.dataset.originalSrcSet||r.srcset)&&(r.srcset=r.dataset.originalSrcSet||r.srcset),(r.dataset.originalSizes||r.sizes)&&(r.sizes=r.dataset.originalSizes||r.sizes))};if(!t)return i(),o(),[...e[0].closest(".single-product").querySelectorAll(".zoomImg")].map(e=>e.remove()),s({onlyZoom:!0}),void(c&&c.apply(e,r));o();const a=e[0].closest(".single-product").querySelector(`.flexy-items [srcset*="${t.image.src}"]`);if(a){const t=e[0].closest(".single-product").querySelector(".flexy-pills > *").children[[...e[0].closest(".single-product").querySelector(".flexy-items").children].indexOf(a.closest("div"))];t&&t.click()}else{i();let r=e[0].closest(".single-product").querySelector(".flexy-pills > *").firstElementChild.firstElementChild;e[0].closest(".single-product").querySelector('.flexy-pills[data-type="circle"]')&&(r=e[0].closest(".single-product").querySelector(".flexy-pills > *").firstElementChild);let o=e[0].closest(".single-product").querySelector(".flexy-items").firstElementChild.querySelector(".ct-image-container img");r.dataset.originalSrc||(r.parentNode.dataset.originalHref=r.parentNode.href,r.dataset.originalSrc=r.src,r.dataset.originalSrcSet=r.srcset,r.dataset.originalSizes=r.sizes,o.parentNode.dataset.originalHref=o.parentNode.href,o.dataset.originalSrc=o.src,o.dataset.originalSrcSet=o.srcset,o.dataset.originalSizes=o.sizes),r.parentNode.href=t.image.full_src,t.image.srcset&&(r.srcset=t.image.srcset),t.image.sizes&&(r.sizes=t.image.sizes),r.src=t.image.src,o.parentNode.href=t.image.full_src,t.image.srcset&&(o.srcset=t.image.srcset),t.image.sizes&&(o.sizes=t.image.sizes),o.src=t.image.src,i()}[...e[0].closest(".single-product").querySelectorAll(".zoomImg")].map(e=>e.remove()),s({onlyZoom:!0}),c&&c.apply(e,r)};o.a.fn.wc_variations_image_update=function(e){const t=document.querySelector(".woocommerce-product-gallery"),r=document.querySelector(".type-product").id.replace("product-","");if(window.ct_localizations.woo_gallery_replace_on_variation_change&&(!t||parseInt(e.variation_id)!==parseInt(t.dataset.currentVariation))){const i=new FormData;return i.append("action","blocksy_get_product_view_for_variation"),i.append("variation_id",e.variation_id),i.append("product_id",r),void fetch(ct_localizations.ajax_url,{method:"POST",body:i}).then(e=>e.json()).then(({success:r,data:i})=>{if(r)return jQuery(t).replaceWith(i.html),void setTimeout(()=>{a.a.trigger("blocksy:frontend:init"),setTimeout(()=>{n({context:this,args:arguments,variation:e})})});n({context:this,args:arguments,variation:e})})}n({context:this,args:arguments,variation:e})}}}}]);